var server = require('server');

/**
 * Includes service worker script to current page scope.
 * This is used during Service worker registration.
 */
server.get('SW', function (req, res, next) {
    response.setContentType('application/javascript');
    res.render("pwa/sw")
    response.getWriter().print('');
    next();
});

/**
 * This is called from the head section to include manifest JSON to current page scope.
 */
server.get('Manifest', function (req, res, next) {
    response.setContentType('application/manifest+json');
    res.render("pwa/manifest")
    response.getWriter().print('');
    next();
});

/**
 * Renders Generic Offline Page as a fallback in case user is offline 
 * and cache doesn't exist for a particular page.
 */
server.get('Offline', function (req, res, next) {
    res.render('pwa/offline')
    next();
});

module.exports = server.exports();